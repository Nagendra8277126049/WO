<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldUpdates>
        <fullName>BlankAddressLine1</fullName>
        <field>Address_Line_1__c</field>
        <name>BlankAddressLine1</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Null</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>BlankAddressLine2</fullName>
        <field>Address_Line_2__c</field>
        <name>BlankAddressLine2</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Null</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>BlankAddressLine3</fullName>
        <field>Address_Line_3__c</field>
        <name>BlankAddressLine3</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Null</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>BlankAddressLine4</fullName>
        <field>Address_Line_4__c</field>
        <name>BlankAddressLine4</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Null</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>BlankBrazilCity</fullName>
        <field>City__c</field>
        <name>BlankBrazilCity</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Null</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>BlankBrazilCountry</fullName>
        <field>Country__c</field>
        <name>BlankBrazilCountry</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>BlankBrazilState</fullName>
        <field>State__c</field>
        <name>BlankBrazilState</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>BlankBrazilZipCode</fullName>
        <field>Zip_Code__c</field>
        <name>BlankBrazilZipCode</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Null</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>BlankCity</fullName>
        <field>City</field>
        <name>BlankCity</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Null</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>BlankCountry</fullName>
        <field>Country</field>
        <name>BlankCountry</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Null</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>BlankState</fullName>
        <field>State</field>
        <name>BlankState</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Null</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>BlankStreet</fullName>
        <field>Street</field>
        <name>BlankStreet</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Null</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>BlankZipCode</fullName>
        <field>PostalCode</field>
        <name>BlankZipCode</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Null</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>UpdateDispatchEvent</fullName>
        <field>DispatchEvent__c</field>
        <formula>UPPER(&#39;DISPATCH_CANCEL_REQUEST&#39;)</formula>
        <name>UpdateDispatchEvent</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>UpdateDispatchEvent2</fullName>
        <field>DispatchEvent__c</field>
        <formula>UPPER(&#39;DISPATCH_STATUS_UPDATE&#39;)</formula>
        <name>UpdateDispatchEvent2</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>UpdateLatamRecordTypeonRework</fullName>
        <field>RecordTypeId</field>
        <lookupValue>Dispatch_Latam_Create</lookupValue>
        <lookupValueType>RecordType</lookupValueType>
        <name>UpdateLatamRecordTypeonRework</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>LookupValue</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>UpdateRecordTypeDispatchCreate</fullName>
        <description>Update Record Type as Dispatch Create when DispatchCountry is US or Canada</description>
        <field>RecordTypeId</field>
        <lookupValue>Dispatch_Create</lookupValue>
        <lookupValueType>RecordType</lookupValueType>
        <name>UpdateRecordTypeDispatchCreate</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>LookupValue</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>UpdateRecordTypeDispatchLATAMCreate</fullName>
        <description>Update Record type to Dispatch LATAM Create when Dispatch Country is LATAM</description>
        <field>RecordTypeId</field>
        <lookupValue>Dispatch_Latam_Create</lookupValue>
        <lookupValueType>RecordType</lookupValueType>
        <name>UpdateRecordTypeDispatchLATAMCreate</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>LookupValue</operation>
        <protected>false</protected>
    </fieldUpdates>
    <outboundMessages>
        <fullName>ESB_Cancel_Slots</fullName>
        <apiVersion>42.0</apiVersion>
        <endpointUrl>https://test.com</endpointUrl>
        <fields>DSP__c</fields>
        <fields>Id</fields>
        <fields>LOB__c</fields>
        <fields>PartnerWorkOrderNumber__c</fields>
        <fields>Scheduling_URL__c</fields>
        <fields>Status</fields>
        <includeSessionId>false</includeSessionId>
        <integrationUser>pratikshya_mohanty@dellteam.com.dellservices</integrationUser>
        <name>ESB Cancel Slots</name>
        <protected>false</protected>
        <useDeadLetterQueue>false</useDeadLetterQueue>
    </outboundMessages>
    <outboundMessages>
        <fullName>WorkOrderDispatchUpdate</fullName>
        <apiVersion>42.0</apiVersion>
        <description>this will be used to trigger the sending of information to Delta</description>
        <endpointUrl>https://test.com</endpointUrl>
        <fields>DCCMTEventCode__c</fields>
        <fields>DispatchEventCode__c</fields>
        <fields>DispatchEvent__c</fields>
        <fields>Id</fields>
        <fields>Status</fields>
        <fields>WorkOrderNumber</fields>
        <includeSessionId>false</includeSessionId>
        <integrationUser>service_interface_user@dell.com.dellservices</integrationUser>
        <name>WorkOrderDispatchUpdate</name>
        <protected>false</protected>
        <useDeadLetterQueue>false</useDeadLetterQueue>
    </outboundMessages>
    <rules>
        <fullName>BlankAddressonDispatchCountryChange</fullName>
        <actions>
            <name>BlankCity</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>BlankCountry</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>BlankState</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>BlankStreet</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>BlankZipCode</name>
            <type>FieldUpdate</type>
        </actions>
        <active>false</active>
        <formula>AND(NOT(ISNEW()), ISCHANGED(Dispatch_Country__c))</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>BlankBrazilAddressonDispatchCountryChange</fullName>
        <actions>
            <name>BlankAddressLine1</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>BlankAddressLine2</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>BlankAddressLine3</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>BlankAddressLine4</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>BlankBrazilCity</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>BlankBrazilCountry</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>BlankBrazilState</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>BlankBrazilZipCode</name>
            <type>FieldUpdate</type>
        </actions>
        <active>false</active>
        <formula>AND(NOT(ISNEW()), ISCHANGED(Dispatch_Country__c))</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>CancelScheduleSlots</fullName>
        <actions>
            <name>ESB_Cancel_Slots</name>
            <type>OutboundMessage</type>
        </actions>
        <active>true</active>
        <description>Cancel Scheduled Slots</description>
        <formula>OR( 
AND( 
ISCHANGED(DispatchEvent__c), 
DispatchEvent__c=&#39;SCHEDULE_CANCEL&#39;, 
IsScheduled__c, 
(NOT(ISNULL(ScheduleStartDate__c))), 
(NOT(ISNULL(ScheduleEndDate__c))) 
), 
AND( 
ISCHANGED(Status), 
ISPICKVAL(Status,&#39;Cancelled&#39;), 
IsScheduled__c, 
ISPICKVAL(schedulingInternalLogic__c,&#39;Scheduled&#39;) 
) 
)</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>DispatchCountryBrazil</fullName>
        <actions>
            <name>UpdateRecordTypeDispatchLATAMCreate</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>OR(AND(ISNEW(),ISPICKVAL(Dispatch_Country__c,&#39;LATAM&#39;)),AND(ISCHANGED(Dispatch_Country__c),ISPICKVAL(Dispatch_Country__c,&#39;LATAM&#39;)))</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>DispatchCountryGlobal</fullName>
        <actions>
            <name>UpdateRecordTypeDispatchCreate</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>OR(AND(ISNEW(),ISPICKVAL(Dispatch_Country__c,&#39;Global except LATAM&#39;)),AND(ISCHANGED(Dispatch_Country__c),ISPICKVAL(Dispatch_Country__c,&#39;Global except LATAM&#39;)))</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>UpdateLatamRecordTypeonRework</fullName>
        <actions>
            <name>UpdateLatamRecordTypeonRework</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>AND(TEXT(Dispatch_Country__c)=&#39;LATAM&#39;,TEXT(Status)=&#39;Rework&#39;,PRIORVALUE(Status)&lt;&gt;&#39;Rework&#39;)</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>WorkOrderCancellationRequest</fullName>
        <actions>
            <name>UpdateDispatchEvent</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>WorkOrderDispatchUpdate</name>
            <type>OutboundMessage</type>
        </actions>
        <active>true</active>
        <description>this will trigger the sending of OBM to delta</description>
        <formula>AND($Profile.Name&lt;&gt;&quot;Service Integration Profile&quot;, TEXT( Status ) = &quot;Cancellation Request&quot; )</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>WorkOrderStatusUpdate</fullName>
        <actions>
            <name>UpdateDispatchEvent2</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>WorkOrderDispatchUpdate</name>
            <type>OutboundMessage</type>
        </actions>
        <active>true</active>
        <description>this will trigger the sending of OBM to delta</description>
        <formula>AND( $Profile.Name&lt;&gt;&quot;Service Integration Profile&quot;, ISBLANK(DispatchNumber__c), OR( TEXT(Status) = &quot;Cancelled&quot;, TEXT(Status) = &quot;Pending Schedule&quot;, TEXT(Status) = &quot;Rework&quot;,TEXT(Status)=&quot;Pending Review&quot;))</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>WorkOrderUpdateDispatch</fullName>
        <actions>
            <name>WorkOrderDispatchUpdate</name>
            <type>OutboundMessage</type>
        </actions>
        <active>true</active>
        <description>this will be used to trigger the sending of information to Delta</description>
        <formula>AND( NOT(DeltaUpdateFlag__c), ISBLANK(DispatchNumber__c), NOT( ISBLANK(PartnerWorkOrderNumber__c) ), NOT( ISBLANK(DispatchEvent__c) ), OR( DispatchEvent__c=&#39;DISPATCH_SUBMISSION_COMPLETE&#39;, DispatchEvent__c=&#39;DISPATCH_INSTRUCTION_UPDATE&#39;, DispatchEvent__c=&#39;DISPATCH_CREATE&#39;, DispatchEvent__c=&#39;DISPATCH_STATUS_UPDATE&#39;), OR( OR( ISCHANGED(DCCMTEventCode__c), ISCHANGED(DispatchEvent__c), DispatchEvent__c=&#39;DISPATCH_INSTRUCTION_UPDATE&#39;), ISCHANGED(Status), ISCHANGED(Parts_Status__c), ISCHANGED(Labor_Status__c) ) )</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
</Workflow>
